import{u as U,y as N,r as g,d as c,o as C,e as E,f as o,w as i,T as I,F as D,j as L,k as T,n as j,q as n,t as _,g as e,A as G,l as w,x as F,i as y,S as M,B as R,D as q,E as O,G as H,L as J,J as z}from"./index-b8b7d0fa.js";import{h as K,a as Q}from"./messages-c18080ba.js";const W={class:"grid p-fluid mt-1"},X={class:"field col-12 md:col-6"},Y={class:"p-float-label"},Z=e("label",{for:"full-name"},[e("span",{style:{color:"red"}},"*"),n(" Nome Completo ")],-1),ee={class:"field col-12 md:col-6"},oe={class:"p-float-label"},te=e("label",{for:"cpf"},[e("span",{style:{color:"red"}},"*"),n(" CPF ")],-1),le={class:"field col-12 md:col-6"},ae={class:"p-float-label"},se=e("label",{for:"telephone"},[e("span",{style:{color:"red"}},"*"),n(" Telefone ")],-1),ne={class:"field col-12 md:col-6"},de={class:"p-float-label"},re=e("label",{for:"address"},[e("span",{style:{color:"red"}},"*"),n(" Endereço ")],-1),ie={class:"field col-12 md:col-6"},ce={class:"p-float-label"},pe=e("label",{for:"entry-date"},[e("span",{style:{color:"red"}},"*"),n(" Data de Entrada ")],-1),ue={class:"field col-12 md:col-6"},me={class:"p-float-label"},_e=e("label",{for:"payment-type"},[e("span",{style:{color:"red"}},"*"),n(" Tipo de Pagamento ")],-1),ye={class:"field col-12 md:col-6"},fe={class:"p-float-label"},ve=e("label",{for:"total-salary"},[e("span",{style:{color:"red"}},"*"),n(" Salário Total ")],-1),be={class:"field col-12 md:col-6"},he={class:"p-float-label"},xe=e("label",{for:"pix-key"},[e("span",{style:{color:"red"}},"*"),n(" Chave Pix ")],-1),ge={__name:"DialogAddEmployee",setup(A){const V=U(),m=N("visibleDialogAdd"),t=g([]),f=async()=>{w();try{await F.post("/employees",{full_name:t.value.full_name,address:t.value.address,telephone:t.value.telephone,cpf:t.value.cpf,entry_date:t.value.entry_date,payment_type:t.value.payment_type,total_salary:t.value.total_salary,pix_key:t.value.pix_key}),V.add({severity:"success",summary:"Adicionado",detail:"Funcionário adicionado com sucesso",life:5e3}),m.value=!1,y()}catch(p){V.add({severity:"error",summary:"Erro",detail:"Erro ao adicionar funcionário",life:5e3}),console.error(p),y()}},v=async()=>{const p=["full_name","address","telephone","cpf","entry_date","payment_type","total_salary","pix_key"];for(const l of p)if(b(t.value[l])){Q("addUser","error","Preencha todos os campos obrigatórios.");return}await f()},b=p=>!p||p.trim()==="";return(p,l)=>{const h=c("Toast"),d=c("Message"),s=c("InputText"),x=c("Button"),k=c("Dialog");return C(),E(D,null,[o(h),o(k,{header:"Adicionar Funcionário",visible:T(m),"onUpdate:visible":l[10]||(l[10]=a=>G(m)?m.value=a:null),position:"top",breakpoints:{"960px":"75vw"},style:{width:"28vw"},modal:!0},{footer:i(()=>[o(x,{label:"Cancelar",icon:"pi pi-times",class:"p-button-danger",onClick:l[8]||(l[8]=a=>m.value=!1)}),o(x,{label:"Adicionar",icon:"pi pi-check",class:"p-button-success",onClick:l[9]||(l[9]=a=>v())})]),default:i(()=>[o(I,{tag:"div"},{default:i(()=>[(C(!0),E(D,null,L(T(K),a=>(C(),j(d,{severity:a.severity,key:a.content},{default:i(()=>[n(_(a.content),1)]),_:2},1032,["severity"]))),128))]),_:1}),e("div",W,[e("div",X,[e("span",Y,[o(s,{type:"text",id:"full-name",modelValue:t.value.full_name,"onUpdate:modelValue":l[0]||(l[0]=a=>t.value.full_name=a)},null,8,["modelValue"]),Z])]),e("div",ee,[e("span",oe,[o(s,{type:"number",id:"cpf",modelValue:t.value.cpf,"onUpdate:modelValue":l[1]||(l[1]=a=>t.value.cpf=a)},null,8,["modelValue"]),te])]),e("div",le,[e("span",ae,[o(s,{type:"number",id:"telephone",modelValue:t.value.telephone,"onUpdate:modelValue":l[2]||(l[2]=a=>t.value.telephone=a)},null,8,["modelValue"]),se])]),e("div",ne,[e("span",de,[o(s,{type:"text",id:"address",modelValue:t.value.address,"onUpdate:modelValue":l[3]||(l[3]=a=>t.value.address=a)},null,8,["modelValue"]),re])]),e("div",ie,[e("span",ce,[o(s,{type:"date",id:"entry-date",modelValue:t.value.entry_date,"onUpdate:modelValue":l[4]||(l[4]=a=>t.value.entry_date=a)},null,8,["modelValue"]),pe])]),e("div",ue,[e("span",me,[o(s,{type:"text",id:"payment-type",modelValue:t.value.payment_type,"onUpdate:modelValue":l[5]||(l[5]=a=>t.value.payment_type=a)},null,8,["modelValue"]),_e])]),e("div",ye,[e("span",fe,[o(s,{type:"text",id:"total-salary",modelValue:t.value.total_salary,"onUpdate:modelValue":l[6]||(l[6]=a=>t.value.total_salary=a)},null,8,["modelValue"]),ve])]),e("div",be,[e("span",he,[o(s,{type:"text",id:"pix-key",modelValue:t.value.pix_key,"onUpdate:modelValue":l[7]||(l[7]=a=>t.value.pix_key=a)},null,8,["modelValue"]),xe])])])]),_:1},8,["visible"])],64)}}},Ce={class:"card"},Ve=e("h5",null,"FUNCIONÁRIOS",-1),ke={class:"my-2"},Te={__name:"Employees",setup(A){M("http://localhost:3333").on("reloadDataEmployees",d=>{v.value=d});const m=g(null),t=R(),f=U(),v=g([]),b=async()=>{w();try{const d=await F.get("/employees");v.value=d.data,y()}catch(d){f.add({severity:"error",summary:"Erro",detail:"Erro ao buscar funcionários.",life:5e3}),y(),console.error(d)}},p=async d=>{w();try{await F.delete("/employees/"+d),f.add({severity:"success",summary:"Deletado",detail:"Funcionário deletado com sucesso",life:5e3}),await b(),y()}catch(s){f.add({severity:"error",summary:"Erro",detail:s.response.data.msg,life:5e3}),console.error(s),y()}},l=(d,s)=>{t.require({target:d.target,message:"Deseja realmente excluir este funcionério?",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"Não",accept:()=>{p(s)}})},h=g(!1);return q("visibleDialogAdd",h),O(()=>{b()}),(d,s)=>{const x=c("ConfirmPopup"),k=c("Toast"),a=c("Button"),B=c("Toolbar"),u=c("Column"),P=c("DataTable"),S=H("tooltip");return C(),E(D,null,[o(x),o(k),e("div",Ce,[Ve,o(B,{class:"mb-4"},{start:i(()=>[e("div",ke,[o(ge),o(a,{label:"Adicionar",icon:"pi pi-plus",class:"p-button-primary mr-2",onClick:s[0]||(s[0]=r=>h.value=!0)})])]),_:1}),o(P,{value:v.value,rowHover:!0,showGridlines:"",tableStyle:"min-width: 50rem"},{default:i(()=>[o(u,{bodyClass:"text-center",field:"full_name",header:"Funcionário"},{body:i(({data:r})=>[n(_(r.full_name)+" ("+_(r.cpf)+") ",1)]),_:1}),o(u,{bodyClass:"text-center",field:"telephone",header:"Telefone"}),o(u,{bodyClass:"text-center",field:"address",header:"Endereço"}),o(u,{bodyClass:"text-center",field:"entry_date",header:"Data de Entrada"},{body:i(({data:r})=>[n(_(T(J)(r.entry_date)),1)]),_:1}),o(u,{bodyClass:"text-center",field:"payment_type",header:"Tipo de Pagamento"},{body:i(({data:r})=>[n(_(r.payment_type),1)]),_:1}),o(u,{bodyClass:"text-center",field:"total_salary",header:"Salário Total"},{body:i(({data:r})=>[n(" R$ "+_(parseFloat(r.total_salary).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),_:1}),o(u,{bodyClass:"text-center",field:"pix_key",header:"Chave Pix"}),o(u,{bodyClass:"text-center"},{body:i(({data:r})=>[z(o(a,{ref_key:"popup",ref:m,onClick:$=>l($,r.id),icon:"pi pi-trash",class:"p-button-rounded p-button-danger"},null,8,["onClick"]),[[S,"Excluir",void 0,{top:!0}]])]),_:1})]),_:1},8,["value"])])],64)}}};export{Te as default};
